"use strict";var modal_target,$SCROLL_TAG,DOC=document,WIN=window,UA=navigator.userAgent,$HTML=DOC.querySelector("html"),$BODY=DOC.querySelector("body"),scroll_top=WIN.pageYOffset,modal_active=!1;$SCROLL_TAG=-1!==UA.indexOf("OPR")||-1!==UA.indexOf("Edge")?$BODY:!window.chrome&&"WebkitAppearance"in document.documentElement.style?$BODY:$HTML;var _CLOSEST=function(e,t){for(var o=e;o;o=o.parentElement)if(o.classList.contains(t))return o},SHOW_MODAL=function(e){e.classList.add("-opened"),e.focus(),setTimeout(function(){modal_active=e},100)},SHOW_OVERLAY=function(){scroll_top=WIN.pageYOffset,$HTML.style.top=-scroll_top+"px",$HTML.classList.add("-fixed"),DOC.querySelector(".modal").classList.add("-opened")},CLOSE_MODAL=function(){modal_active.classList.remove("-opened"),$HTML.focus()},CLOSE_OVERLAY=function(){modal_active=!1,$HTML.classList.remove("-fixed"),$SCROLL_TAG.scrollTop=scroll_top,DOC.querySelector(".modal").classList.remove("-opened")},MOVE_MODAL=function(e){var t=DOC.querySelectorAll(".modal__item"),o=t.length;if(modal_target=[].slice.call(t).indexOf(modal_active),modal_target=Number(modal_target),"prev"==e&&0<modal_target)modal_target-=1;else{if(!("next"==e&&modal_target<o-1))return!1;modal_target+=1}CLOSE_MODAL(),SHOW_MODAL(t[modal_target])},HANDLE_TOUCH_MOVE=function(e,t){e.target===t&&0!==t.scrollTop&&t.scrollTop+t.clientHeight!==t.scrollHeight?e.stopPropagation():e.preventDefault()},SCROLL_LIMITEDLY=function(e){e.scrollTop=1,e.addEventListener("scroll",function(){0===e.scrollTop?e.scrollTop=1:e.scrollTop+e.clientHeight===e.scrollHeight&&(e.scrollTop=e.scrollTop-1)},{passive:!0}),DOC.addEventListener("touchmove",HANDLE_TOUCH_MOVE(event,e),{passive:!1})},SCROLL_RESTART=function(e){DOC.removeEventListener("touchmove",HANDLE_TOUCH_MOVE(event,e),{passive:!1})};DOC.addEventListener("click",function(e){var t=e.target;if(_CLOSEST(t,"modal__trigger")){var o=_CLOSEST(t,"modal__trigger");e.preventDefault(),modal_target=o.getAttribute("href"),modal_target=DOC.querySelector(modal_target),SCROLL_LIMITEDLY(modal_target),SHOW_OVERLAY(),SHOW_MODAL(modal_target)}return!!modal_active&&(_CLOSEST(t,"modal__prev")?(MOVE_MODAL("prev"),!1):_CLOSEST(t,"modal__next")?(MOVE_MODAL("next"),!1):((_CLOSEST(t,"modal__closeButton")||_CLOSEST(t,"modal__closeInterface"))&&(SCROLL_RESTART(modal_target),CLOSE_MODAL(),CLOSE_OVERLAY()),_CLOSEST(t,"modal__inner")||(SCROLL_RESTART(modal_target),CLOSE_MODAL(),CLOSE_OVERLAY()),!1))},{once:!1,passive:!1,capture:!1}),WIN.addEventListener("keydown",function(){if(!modal_active)return!1;var e=event.keyCode;return 27==e&&(CLOSE_MODAL(),CLOSE_OVERLAY()),37==e&&MOVE_MODAL("prev"),39==e&&MOVE_MODAL("next"),!1});